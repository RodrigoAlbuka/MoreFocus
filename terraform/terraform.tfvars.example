# MoreFocus - Terraform Configuration Example
# Copy this file to terraform.tfvars and customize the values

# AWS Configuration
aws_region = "us-east-1"  # Região AWS (us-east-1 tem mais recursos free tier)
environment = "production"

# Project Configuration
project_name = "morefocus"  # Nome do projeto (usado em recursos)

# EC2 Configuration
instance_type = "t3.micro"  # Free tier eligible
ebs_volume_size = 20        # GB (free tier: até 30GB)

# SSH Access (OBRIGATÓRIO)
# Gere uma chave SSH: ssh-keygen -t rsa -b 4096 -f ~/.ssh/morefocus-key
# Cole aqui o conteúdo do arquivo ~/.ssh/morefocus-key.pub
ssh_public_key = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC... your-public-key-here"

# Database Configuration
use_rds = false  # true = PostgreSQL RDS, false = SQLite (recomendado para free tier)
db_name = "morefocus"
db_user = "postgres"
db_password = "ChangeThisSecurePassword123!"

# n8n Configuration
n8n_user = "admin"
n8n_password = "ChangeThisSecurePassword123!"

# Optional: Elastic IP (custa $3.65/mês)
use_elastic_ip = false

# Optional: Domain Configuration
domain_name = ""  # ex: "morefocus.com"
create_route53_records = false
use_ssl = true

# Email Integration (Mailgun)
mailgun_api_key = ""     # Sua chave da API do Mailgun
mailgun_domain = ""      # Seu domínio no Mailgun

# CRM Integration (HubSpot)
hubspot_access_token = ""  # Token de acesso do HubSpot

# Analytics (Google Analytics)
ga_measurement_id = ""  # ID de medição do GA4
ga_api_secret = ""      # Segredo da API do GA4

# Security (Opcional - restringir acesso)
allowed_ssh_cidrs = ["0.0.0.0/0"]    # IPs permitidos para SSH
allowed_http_cidrs = ["0.0.0.0/0"]   # IPs permitidos para HTTP/HTTPS

# Cost Optimization
enable_cloudwatch_monitoring = false  # Evita custos extras
enable_spot_instances = false         # Não recomendado para produção

# Additional Features (custos extras)
enable_redis = false          # Cache Redis
enable_elasticsearch = false # Logs avançados
enable_auto_scaling = false  # Auto scaling

# Tags adicionais
additional_tags = {
  Owner = "Seu Nome"
  Team = "MoreFocus"
  CostCenter = "Marketing"
}

# ============================================
# CONFIGURAÇÕES POR CENÁRIO
# ============================================

# CENÁRIO 1: Free Tier Máximo (custo ~$5-10/mês)
# instance_type = "t3.micro"
# use_rds = false
# use_elastic_ip = false
# enable_cloudwatch_monitoring = false
# ebs_volume_size = 20

# CENÁRIO 2: Produção Básica (custo ~$20-30/mês)
# instance_type = "t3.small"
# use_rds = true
# use_elastic_ip = true
# enable_cloudwatch_monitoring = true
# ebs_volume_size = 30

# CENÁRIO 3: Produção Avançada (custo ~$50-100/mês)
# instance_type = "t3.medium"
# use_rds = true
# use_elastic_ip = true
# enable_cloudwatch_monitoring = true
# enable_redis = true
# ebs_volume_size = 50
# enable_auto_scaling = true

# ============================================
# CONFIGURAÇÕES POR REGIÃO
# ============================================

# Regiões com Free Tier mais generoso:
# us-east-1 (N. Virginia) - Mais serviços gratuitos
# us-west-2 (Oregon) - Boa performance
# eu-west-1 (Ireland) - Europa
# ap-southeast-1 (Singapore) - Ásia

# ============================================
# SEGURANÇA
# ============================================

# Para produção, restrinja os CIDRs:
# allowed_ssh_cidrs = ["SEU.IP.PUBLICO/32"]
# allowed_http_cidrs = ["0.0.0.0/0"]  # HTTP pode ficar aberto

# Use senhas fortes:
# - Mínimo 12 caracteres
# - Misture letras, números e símbolos
# - Não reutilize senhas

# ============================================
# MONITORAMENTO
# ============================================

# Para monitoramento básico gratuito:
# enable_cloudwatch_monitoring = false
# 
# Para monitoramento avançado (custo extra):
# enable_cloudwatch_monitoring = true
# enable_elasticsearch = true

# ============================================
# BACKUP
# ============================================

# Backups automáticos são configurados via cron:
# - Diário às 2:00 AM
# - Retenção de 7 dias
# - Upload para S3

# Para backups mais frequentes, edite o cron no user_data.sh

# ============================================
# DOMÍNIO E SSL
# ============================================

# Se você tem um domínio:
# domain_name = "morefocus.seudominio.com"
# create_route53_records = true
# use_ssl = true

# Isso configurará:
# - Registro DNS no Route53
# - Certificado SSL via Let's Encrypt
# - Redirecionamento HTTPS

# ============================================
# INTEGRAÇÃO COM SERVIÇOS
# ============================================

# Configure as integrações após o deploy:
# 1. Mailgun para emails
# 2. HubSpot para CRM
# 3. Google Analytics para métricas
# 4. Stripe para pagamentos (manual)

# ============================================
# TROUBLESHOOTING
# ============================================

# Se o deploy falhar:
# 1. Verifique as credenciais AWS: aws sts get-caller-identity
# 2. Verifique a chave SSH: cat ~/.ssh/morefocus-key.pub
# 3. Verifique os logs: terraform apply -auto-approve
# 4. Acesse a instância: ssh -i ~/.ssh/morefocus-key ubuntu@IP
# 5. Verifique os logs: tail -f /var/log/user-data.log

