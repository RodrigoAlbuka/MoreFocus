# MoreFocus - Terraform Configuration Example
# Variáveis padronizadas em UPPER_CASE
# Copy this file to terraform.tfvars and customize the values

# AWS Configuration
AWS_REGION = "us-east-2"  # Região AWS (us-east-1 tem mais recursos free tier)
ENVIRONMENT = "production"

# Project Configuration
PROJECT_NAME = "morefocus"  # Nome do projeto (usado em recursos)

# EC2 Configuration
INSTANCE_TYPE = "t3.micro"  # Free tier eligible
EBS_VOLUME_SIZE = 20        # GB (free tier: até 30GB)

# SSH Access (OBRIGATÓRIO)
# Gere uma chave SSH: ssh-keygen -t rsa -b 4096 -f ~/.ssh/morefocus-key
# Cole aqui o conteúdo do arquivo ~/.ssh/morefocus-key.pub
SSH_PUBLIC_KEY = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC... your-public-key-here"

# Database Configuration (Supabase)
USE_RDS = false  # false = usar Supabase, true = criar RDS PostgreSQL
DB_NAME = "postgres"
DB_USER = "postgres"
DB_PASSWORD = "h88b2wQPK2q-ry+"  # Senha do Supabase
SUPABASE_HOST = "db.czlelqdsypwtwfmasvik.supabase.co"
SUPABASE_PASSWORD = "h88b2wQPK2q-ry+"
SUPABASE_SSL = true

# n8n Configuration
N8N_USER = "admin"
N8N_PASSWORD = "MoreFocus2024!Admin"

# Optional: Elastic IP (custa $3.65/mês)
USE_ELASTIC_IP = false

# Optional: Domain Configuration
DOMAIN_NAME = "morefocus.com.br"  # Seu domínio
CREATE_ROUTE53_RECORDS = false   # true para criar registros DNS
USE_SSL = true

# Email Integration (Mailgun)
MAILGUN_API_KEY = ""     # Sua chave da API do Mailgun
MAILGUN_DOMAIN = ""      # Seu domínio no Mailgun

# CRM Integration (HubSpot)
HUBSPOT_ACCESS_TOKEN = ""  # Token de acesso do HubSpot

# Analytics (Google Analytics)
GA_MEASUREMENT_ID = ""  # ID de medição do GA4
GA_API_SECRET = ""      # Segredo da API do GA4

# Security (Opcional - restringir acesso)
ALLOWED_SSH_CIDRS = ["0.0.0.0/0"]    # IPs permitidos para SSH
ALLOWED_HTTP_CIDRS = ["0.0.0.0/0"]   # IPs permitidos para HTTP/HTTPS

# Cost Optimization
ENABLE_CLOUDWATCH_MONITORING = false  # Evita custos extras
ENABLE_SPOT_INSTANCES = false         # Não recomendado para produção

# Additional Features (custos extras)
ENABLE_REDIS = false          # Cache Redis
ENABLE_ELASTICSEARCH = false # Logs avançados
ENABLE_AUTO_SCALING = false  # Auto scaling

# Tags adicionais
ADDITIONAL_TAGS = {
  Owner = "Seu Nome"
  Team = "MoreFocus"
  CostCenter = "Marketing"
}

# ============================================
# CONFIGURAÇÕES POR CENÁRIO
# ============================================

# CENÁRIO 1: Free Tier Máximo (custo ~$2-5/mês)
# INSTANCE_TYPE = "t3.micro"
# USE_RDS = false
# USE_ELASTIC_IP = false
# ENABLE_CLOUDWATCH_MONITORING = false
# EBS_VOLUME_SIZE = 20

# CENÁRIO 2: Produção Básica (custo ~$15-25/mês)
# INSTANCE_TYPE = "t3.small"
# USE_RDS = false  # Continuar com Supabase
# USE_ELASTIC_IP = true
# ENABLE_CLOUDWATCH_MONITORING = true
# EBS_VOLUME_SIZE = 30

# CENÁRIO 3: Produção Avançada (custo ~$40-60/mês)
# INSTANCE_TYPE = "t3.medium"
# USE_RDS = true  # Migrar para RDS
# USE_ELASTIC_IP = true
# ENABLE_CLOUDWATCH_MONITORING = true
# ENABLE_REDIS = true
# EBS_VOLUME_SIZE = 50
# ENABLE_AUTO_SCALING = true

# ============================================
# CONFIGURAÇÕES POR REGIÃO
# ============================================

# Regiões com Free Tier mais generoso:
# us-east-1 (N. Virginia) - Mais serviços gratuitos
# us-east-2 (Ohio) - Boa performance, menos congestionada
# us-west-2 (Oregon) - Boa performance
# eu-west-1 (Ireland) - Europa
# ap-southeast-1 (Singapore) - Ásia

# ============================================
# SEGURANÇA
# ============================================

# Para produção, restrinja os CIDRs:
# ALLOWED_SSH_CIDRS = ["SEU.IP.PUBLICO/32"]
# ALLOWED_HTTP_CIDRS = ["0.0.0.0/0"]  # HTTP pode ficar aberto

# Use senhas fortes:
# - Mínimo 12 caracteres
# - Misture letras, números e símbolos
# - Não reutilize senhas

# ============================================
# MONITORAMENTO
# ============================================

# Para monitoramento básico gratuito:
# ENABLE_CLOUDWATCH_MONITORING = false
# 
# Para monitoramento avançado (custo extra):
# ENABLE_CLOUDWATCH_MONITORING = true
# ENABLE_ELASTICSEARCH = true

# ============================================
# BACKUP
# ============================================

# Backups automáticos são configurados via cron:
# - A cada 15 minutos: health check
# - Diário às 2:00 AM: backup completo
# - Retenção de 7 dias
# - Upload para S3

# Para backups mais frequentes, edite o user_data.sh

# ============================================
# DOMÍNIO E SSL
# ============================================

# Se você tem um domínio:
# DOMAIN_NAME = "morefocus.seudominio.com"
# CREATE_ROUTE53_RECORDS = true
# USE_SSL = true

# Isso configurará:
# - Registro DNS no Route53
# - Certificado SSL via Let's Encrypt
# - Redirecionamento HTTPS

# ============================================
# INTEGRAÇÃO COM SERVIÇOS
# ============================================

# Configure as integrações após o deploy:
# 1. Mailgun para emails
# 2. HubSpot para CRM
# 3. Google Analytics para métricas
# 4. Stripe para pagamentos (manual)

# ============================================
# TROUBLESHOOTING
# ============================================

# Se o deploy falhar:
# 1. Verifique as credenciais AWS: aws sts get-caller-identity
# 2. Verifique a chave SSH: cat ~/.ssh/morefocus-key.pub
# 3. Verifique os logs: terraform apply -auto-approve
# 4. Acesse a instância: ssh -i ~/.ssh/morefocus-key ubuntu@IP
# 5. Verifique os logs: tail -f /var/log/user-data.log

# ============================================
# EXEMPLO DE CONFIGURAÇÃO COMPLETA
# ============================================

# AWS_REGION = "us-east-2"
# PROJECT_NAME = "morefocus"
# INSTANCE_TYPE = "t3.micro"
# EBS_VOLUME_SIZE = 20
# SSH_PUBLIC_KEY = "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQC..."
# USE_RDS = false
# N8N_USER = "admin"
# N8N_PASSWORD = "MoreFocus2024!Secure"
# SUPABASE_HOST = "db.czlelqdsypwtwfmasvik.supabase.co"
# SUPABASE_PASSWORD = "h88b2wQPK2q-ry+"
# DOMAIN_NAME = "morefocus.com.br"
# USE_ELASTIC_IP = false
# ENABLE_CLOUDWATCH_MONITORING = false

